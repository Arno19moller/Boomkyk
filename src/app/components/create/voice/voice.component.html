@if (audioFiles() && audioFiles()!.length > 0) {
  <ion-card>
    <ion-list>
      @for (audioFile of audioFiles(); track $index) {
        <ion-item-sliding>
          <ion-item
            lines="none"
            [class.playing-item]="audioFile.isPlaying"
            appLongPress
            (longPress)="deleteButtonClicked(audioFile)"
          >
            <ion-label>Voice Note {{ audioFile.index }}</ion-label>
            <ion-button slot="end" fill="clear" (click)="playFile(audioFile)">
              @if (!audioFile.isPlaying) {
                <ion-icon name="play" slot="icon-only"></ion-icon>
              } @else {
                <ion-icon name="pause" slot="icon-only"></ion-icon>
              }
            </ion-button>
          </ion-item>
          @if (allowEdit()) {
            <ion-item-options slot="end">
              <ion-item-option color="danger" expandable="true" (click)="deleteButtonClicked(audioFile)">
                <ion-icon slot="icon-only" name="trash"></ion-icon>
              </ion-item-option>
            </ion-item-options>
          }
        </ion-item-sliding>
      }
    </ion-list>
  </ion-card>
}

<ion-button
  fill="solid"
  shape="round"
  slot="end"
  size="large"
  [class.pulsing-button]="isRecording"
  (touchstart)="startLongPress()"
  (touchend)="endLongPress()"
  style="position: fixed; bottom: 10px; left: calc(50% - 20px); z-index: 2"
>
  <ion-icon name="mic" slot="icon-only"></ion-icon>
</ion-button>

<app-popup
  [(isAlertOpen)]="openConfirmDelete"
  [heading]="'Delete'"
  [body]="confirmDeleteBody"
  [buttonType]="'confirm'"
  (popupClosed)="deletePopupClosed($event)"
></app-popup>
