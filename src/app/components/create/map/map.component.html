<ion-card>
  <ion-list>
    <ion-item lines="none">
      <ion-toggle
        #showMapToggle
        justify="space-between"
        [disabled]="loading"
        [enableOnOffLabels]="true"
        (ionChange)="loadMap(showMapToggle.checked)"
      >
        Show Map
      </ion-toggle>
    </ion-item>
    @if (isMapLoaded) {
      <ion-item lines="none">
        <ion-toggle
          #locationToggle
          justify="space-between"
          color="success"
          [disabled]="loading"
          [enableOnOffLabels]="true"
          (ionChange)="locationToggleChanged(locationToggle.checked)"
        >
          Save Current Location
        </ion-toggle>
      </ion-item>
    }
  </ion-list>

  @if (showMap) {
    <div class="map-card">
      @if (!isMapLoaded) {
        <ion-skeleton-text [animated]="true" class="map"></ion-skeleton-text>
      }
      <div id="leafletMap" class="map"></div>
    </div>
  }
</ion-card>
